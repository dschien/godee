<!DOCTYPE html>
<html class="no-js" lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<link href="style.css" media="screen" rel="stylesheet" type="text/css" />
		<title>Guardian energy calculator</title>
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
		<script src="js/jquery-1.7.1.min.js"></script>
		<link href='http://fonts.googleapis.com/css?family=PT+Mono' rel='stylesheet' type='text/css'>
		<script type="text/javascript">
			// Load the Visualization API and the piechart package.
			google.load('visualization', '1.0', {
				'packages' : ['corechart']
			});

			// Set a callback to run when the Google Visualization API is loaded.
			// google.setOnLoadCallback(drawChart);

			// Callback that creates and populates a data table,
			// instantiates the pie chart, passes in the data and
			// draws it.

			function drawChart(e_serv, e_network, e_acc_net, e_user) {

				// Create the data table.
				var data = new google.visualization.DataTable();
				data.addColumn('string', 'Component');
				data.addColumn('number', 'Energy');
				data.addRows([['Server', e_serv], ['Network', e_network], ['Access Network', e_acc_net], ['User Device', e_user]]);

				// Set chart options
				var options = {
					'title' : 'Energy of Components',
					'width' : 400,
					'height' : 300
				};

				// Instantiate and draw our chart, passing in some options.
				var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
				chart.draw(data, options);
			}
		</script>
		<script type="text/javascript" charset="utf-8">
			function calc() {

				var textField = document.getElementById('time')
				var duration = 60
				if(textField.value != "")
					duration = textField.value
				var deviceType = document.getElementById('device').value
				var p_device = 0
				switch(deviceType) {
					case 'phone':
						p_device = 1
						break;
					case 'tablet':
						p_device = 3
						break;
					case 'laptop':
						p_device = 28
						break;
					case 'pc':
						p_device = 58
						break;
					default:
						// default is laptop
						p_device = 28
				}

				var connectionType = document.getElementById('connection').value
				var e_acc_net = 0
				switch(connectionType) {
					case 'dsl':
						e_acc_net = 5 * duration
						break;
					case 'mobile':
						e_acc_net = 70
						break;
					default:
						// default is dsl
						e_acc_net = 5 * duration
				}

				var e_serv = 104
				var e_network = 6
				var e_user = p_device * duration

				var e_total = e_serv + e_network + e_acc_net + e_user
				document.getElementById('bignr').innerHTML = "<h1><big>"+ e_total +"</big> wh</h1>"
				drawChart(e_serv, e_network, e_acc_net, e_user)
				// alert('total energy :' + e_total)

			}
		</script>
	</head>
	<body>
		<div id="frame">
		<div id="header">
			<h1>THE GUARDIAN ENERGY</h1>
			<p><a href="about.html">ABOUT</a></p>
		</div>
		<div id="column_left">
			<h2>1. Website</h2>
			<p>http://theguardian.co.uk</p>
			<h2>2. Select device</h2>
			<select name="device" id='device'>
				<option>phone</option>
				<option>tablet</option>
				<option>laptop</option>
				<option>pc</option>
			</select>
			<h2>3. Select connection</h2>
			<select name="connection" id='connection'>
				<option>dsl</option>
				<option>mobile</option>
			</select>
			<h2>4. Browsing time</h2>
			<input name="time" value="45" id='time'>
			<h2>Calculate</h2>
			<button value="calc" name="calculate" onclick="calc()">
				Go
			</button>
		</div>
		<!--Div that will hold the pie chart-->
		<div id="column_right">
			<div id="bignr"><h1><big>?</big>wh</h1></div>
			<div id="chart_div"></div>
			</div>
		</div>
		<footer></footer>
		<script>
			var _gaq = [['_setAccount', 'UA-XXXXX-X'], ['_trackPageview']]; ( function(d, t) {
				var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
				g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
				s.parentNode.insertBefore(g, s)
			}(document, 'script'));

		</script>
	</body>
</html>